<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objective-C Code Selector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        select, textarea {
            width: 100%;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Objective-C Code Template Selector</h1>
    <label for="codeSelector">Choose a code template:</label>
    <select id="codeSelector" onchange="displayCode()">
        <option value="">Select a template</option>
        <option value="code1">NSURLSession Code</option>
        <option value="code2">AFURLSessionManager Code</option>
        <option value="code3">SessionDelegate Code</option>
        <option value="code4">HttpAsynConnection Code</option>
    </select>

    <textarea id="codeDisplay" rows="20" readonly></textarea>

    <script>
        const codeTemplates = {
            code1: `
#import <Foundation/Foundation.h>

%hook NSURLSession
- (id)dataTaskWithRequest:(NSMutableURLRequest *)request completionHandler:(void (^)(NSData *data, NSURLResponse *response, NSError *error))completionHandler {
void (^customCompletion)(NSData *data, NSURLResponse *response, NSError *error) = ^(NSData *data, NSURLResponse *response, NSError *error) {
if (([request.URL.absoluteString containsString:@"subscribers"] || [request.URL.absoluteString containsString:@"receipt"]) && (![request.URL.absoluteString containsString:@"offerings"])) {
NSDictionary *dict = @{
    @"request_date": @"2023-08-02T02:21:57Z",
    @"request_date_ms": @1690942917283,
    @"subscriber": @{
        @"entitlements": @{
            @"${entValue}": @{
                @"expires_date": @"2099-02-18T07:52:54Z",
                @"original_purchase_date": @"2020-02-11T07:52:55Z",
                @"purchase_date": @"2020-02-11T07:52:54Z",
                @"product_identifier": @"${prodIDValue}"
            }
        },
        @"first_seen": @"2023-07-27T12:47:03Z",
        @"last_seen": @"2023-08-02T01:57:17Z",
        @"management_url": NSNull.null,
        @"non_subscriptions": @{
        },
        @"original_app_user_id": @"70B24288-83C4-4035-B001-573285B21AE2",
        @"original_application_version": @"3",
        @"original_purchase_date": @"2023-07-26T17:04:14Z",
        @"other_purchases": @{
        },
        @"subscriptions": @{
            @"${prodIDValue}": @{
                @"expires_date": @"2099-02-18T07:52:54Z",
                @"original_purchase_date": @"2020-02-11T07:52:55Z",
                @"purchase_date": @"2020-02-11T07:52:54Z"
            }
        },
        @"entitlement": @{
        }
    }
};
data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:nil];
}
completionHandler(data, response, error);
};
return %orig(request, customCompletion);
}
%end
            `,
            code2: `
#import <Foundation/Foundation.h>

%hook AFURLSessionManager
-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)task didReceiveData:(NSData *)data {
if ([task.currentRequest.URL.absoluteString containsString:@"${containsStringOne}"]) {
NSDictionary *dict = "User Code HERE"


data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:0];
}
%orig(session, task, data);
}
%end
            `,
            code3: `
#import <Foundation/Foundation.h>

%hook SessionDelegate
-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)task didReceiveData:(NSData *)data {
if ([task.currentRequest.URL.absoluteString containsString:@"${containsStringOne}"]) {
NSDictionary *dict = "User Code HERE"


data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:0];
}
%orig(session, task, data);
}
%end

%ctor {
%init(SessionDelegate = objc_getClass("Alamofire.SessionDelegate"));
}
            `,
            code4: `
#import  <Foundation/Foundation.h>

%hook HttpAsynConnection
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
NSURLRequest *originalRequest = [connection originalRequest];
NSString *urlString = [[originalRequest URL] absoluteString];
if ([urlString containsString:@"${containsStringOne}"]) {
NSDictionary *dict = "User Code HERE"


NSError *error = nil;
NSData *modifiedData = [NSJSONSerialization dataWithJSONObject:dict options:0 error:&error];
if (!error) {
%orig(connection, modifiedData);
} else {
%orig(connection, data);
}
} else {
%orig(connection, data);
}
}
%end
            `
        };

        function displayCode() {
            const selector = document.getElementById('codeSelector');
            const display = document.getElementById('codeDisplay');
            const selectedCode = selector.value;
            display.value = codeTemplates[selectedCode] || '';
        }
    </script>
</body>
</html>