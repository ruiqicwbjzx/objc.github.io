html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objective-C Code Template Selector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        select, textarea, input, button {
            width: 100%;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Objective-C Code Template Selector</h1>
    
    <label for="codeSelector">Choose a code template:</label>
    <select id="codeSelector" onchange="displayCode()">
        <option value="">Select a template</option>
        <option value="code1">NSURLSession Code</option>
        <option value="code2">AFURLSessionManager Code</option>
        <option value="code3">SessionDelegate Code</option>
        <option value="code4">HttpAsynConnection Code</option>
    </select>
    
    <label for="userInput">Enter JSON-like data (for NSURLSession Code):</label>
    <textarea id="userInput" rows="10" placeholder='{
    "success": true,
    "result": {
        "vipExpireTime": "2999-09-09 09:09:09",
        "dataId": "10171807697013995683",
        "vipGroupInfos": [
            {
                "groupType": "TYPE_ONE",
                "vipType": "VIP",
                "autoPay": "NO"
            }
        ],
        "nickname": "https://t.me/py996",
        "type": "VIP"
    },
    "returnCode": "200",
    "timeOut": false
}'></textarea>
    
    <button onclick="updateCode()">Update Code</button>
    
    <textarea id="codeDisplay" rows="20" readonly></textarea>
    
    <script>
        const codeTemplates = {
            code1: `
#import <Foundation/Foundation.h>

%hook NSURLSession
- (id)dataTaskWithRequest:(NSMutableURLRequest *)request completionHandler:(void (^)(NSData *data, NSURLResponse *response, NSError *error))completionHandler {
    void (^customCompletion)(NSData *data, NSURLResponse *response, NSError *error) = ^(NSData *data, NSURLResponse *response, NSError *error) {
        if (([request.URL.absoluteString containsString:@"subscribers"] || [request.URL.absoluteString containsString:@"receipt"]) && (![request.URL.absoluteString containsString:@"offerings"])) {
            NSDictionary *dict = @${userInput};
            data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:nil];
        }
        completionHandler(data, response, error);
    };
    return %orig(request, customCompletion);
}
%end
            `,
            code2: `
#import <Foundation/Foundation.h>

%hook AFURLSessionManager
-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)task didReceiveData:(NSData *)data {
    if ([task.currentRequest.URL.absoluteString containsString:@"${containsStringOne}"]) {
        NSDictionary *dict = @${userInput};
        data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:0];
    }
    %orig(session, task, data);
}
%end
            `,
            code3: `
#import <Foundation/Foundation.h>

%hook SessionDelegate
-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)task didReceiveData:(NSData *)data {
    if ([task.currentRequest.URL.absoluteString containsString:@"${containsStringOne}"]) {
        NSDictionary *dict = @${userInput};
        data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:0];
    }
    %orig(session, task, data);
}
%end

%ctor {
    %init(SessionDelegate = objc_getClass("Alamofire.SessionDelegate"));
}
            `,
            code4: `
#import <Foundation/Foundation.h>

%hook HttpAsynConnection
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSURLRequest *originalRequest = [connection originalRequestjavascript
    if ([originalRequest.URL.absoluteString containsString:@"${containsStringOne}"]) {
        NSDictionary *dict = @${userInput};
        data = [NSJSONSerialization dataWithJSONObject:dict options:0 error:0];
    }
    %orig(connection, data);
}
%end
            `
        };

        function displayCode() {
            const selector = document.getElementById('codeSelector');
            const selectedValue = selector.value;
            const codeArea = document.getElementById('codeDisplay');

            if (selectedValue) {
                codeArea.value = codeTemplates[selectedValue];
            } else {
                codeArea.value = '';
            }
        }

        function updateCode() {
            const userInput = document.getElementById('userInput').value;
            const selector = document.getElementById('codeSelector');
            const selectedValue = selector.value;
            const codeArea = document.getElementById('codeDisplay');

            if (selectedValue) {
                // Replace ${userInput} in the selected template
                const updatedCode = codeTemplates[selectedValue].replace(/\${userInput}/g, userInput);
                codeArea.value = updatedCode;
            } else {
                alert('Please select a code template first.');
            }
        }
    </script>
</body>
</html>
